# Vegan Restaurants
A web application to find restaurants that serve vegan food
### Required dependencies
**Server side:**
- express
- express-session
- cookie-session
- express-validator -- server side validation
- mysql -- database connection
- passport -- authenticating user
- passport-google-oauth2  -- for google login
- socket.io -- communication between client and server
- dotenv -- for google client id etc. sample text file example-env.txt
- nodemon -- making developers' lives easier

**Client side:**
- mapbox-gl -- showing restaurant's location
- mapbox-gl GeoCoder -- showing user's location
- rater.js -- for star ratings

### API examples:

| TYPE| EXPLANATION| EXAMPLE|
| ------ | ------ |------ |
| GET| get all the restaurants from database | /api/restaurant/all |
| GET| get the restaurant with corresponding id | /api/restaurant/1 |
| PUT |update restaurant with corresponding id | /api/restaurant/1 |
| DELETE|delete restaurant with corresponding id| /api/restaurant/1 |
| POST|add restaurant| /addRestaurant |
| GET| search restaurants with given parameters| /api/restaurants/search/**_City_**/**_Helsinki_** |
| GET| get a single restaurant's reviews|/api/reviews/restaurant/id=1|
| GET|search reviews with given parameters| /api/reviews/search/**_Username_**/**_Matti_**
| GET| get all reviews|/api/reviews/all/token=<token>|

/api/restaurants/search/:searchBy/:parameter valid _searchBy_ values are: 
**restaurant_name**, **restaurant_address**, **zipcode**, **city**, **restaurant_desc**, **link**, **rating** and all from **monday to sunday**

/api/reviews/:searchBy/:parameter valid _searchBy_ values are: 
**stars**, **review** and **username**

Add restaurant and update restaurant body example: 
```json
body {
    "id": null                              
    "restaurant_name": "Idan Ravintola",
    "restaurant_address": "Hämeentie 48",
    "zipcode": "00500",
    "city": "Helsinki",
    "link": "https://ravintolaida.fi",
    "restaurant_desc": "Itse tekemää herkkua!",
    "rating": null,                         
    "monday": "1100-2000",                  
    "tuesday": "1100-2000",                     
    "wednesday":"1000-2000",
    "thursday":"1100-2000",
    "friday": "1100-2000",
    "saturday": "1100-2000",
    "sunday": "1100-2000"
} 
``` 
- id is autogenerated
- rating is not updated
- opening hours are like that to make calculating easier
### Login and authentication
**Login** is done with Google and after login you are given an **access token**. At the moment authentication is used only with /api/reviews/all/ 
